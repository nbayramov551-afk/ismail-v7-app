<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ISMAIL BOSS | V43 BEAST</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        :root { --neon: #00ff41; --danger: #ff003c; --blue: #00f2ff; --bg: #000000; --gold: #ffd700; }
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: #fff; height: 100vh; overflow: hidden; font-family: 'Orbitron', sans-serif; }

        #matrix-bg { position: fixed; inset: 0; z-index: -1; opacity: 0.15; }

        /* INTRO */
        #intro-screen { position: fixed; inset: 0; z-index: 5000; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .intro-title { font-size: 3rem; color: var(--neon); text-shadow: 0 0 20px var(--neon); animation: pulse 1s infinite alternate; }

        /* LOGIN */
        #login-screen { position: fixed; inset: 0; z-index: 4000; background: rgba(0,0,0,0.95); display: none; flex-direction: column; align-items: center; justify-content: center; gap: 20px; }
        .role-btn { width: 280px; padding: 25px; border: 2px solid var(--neon); background: transparent; color: var(--neon); font-size: 1.2rem; font-weight: 900; cursor: pointer; text-transform: uppercase; }

        /* APP */
        #app-screen { position: fixed; inset: 0; z-index: 100; display: none; flex-direction: column; background: #050505; }
        .top-bar { padding: 15px; border-bottom: 2px solid var(--neon); display: flex; justify-content: space-between; align-items: center; background: #000; }
        
        .secure-notice { background: rgba(255, 215, 0, 0.05); border: 1px solid var(--gold); color: var(--gold); padding: 8px; border-radius: 10px; font-size: 10px; text-align: center; margin: 10px; font-family: 'Share Tech Mono'; }

        .feed { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px; }
        .bubble { padding: 12px 18px; border-radius: 8px; max-width: 80%; font-family: 'Share Tech Mono'; position: relative; }
        .me { align-self: flex-end; background: #004d40; border-right: 4px solid var(--blue); }
        .them { align-self: flex-start; background: #263238; border-left: 4px solid var(--neon); }
        
        .bot-bar { padding: 15px; background: #000; border-top: 1px solid var(--neon); display: flex; gap: 8px; align-items: center; }
        .msg-box { flex: 1; background: #111; border: 1px solid #333; color: white; padding: 12px; border-radius: 5px; font-family: 'Share Tech Mono'; }

        /* EMOJI PANEL */
        .emoji-panel { display: flex; gap: 5px; }
        .emoji-btn { font-size: 20px; cursor: pointer; transition: 0.2s; }
        .emoji-btn:active { transform: scale(1.5); }

        /* VIDEO CALL LAYER */
        #vid-layer { position: fixed; inset: 0; z-index: 5500; background: #000; display: none; }
        #remote-v { width: 100%; height: 100%; object-fit: cover; }
        #local-v { position: absolute; top: 20px; right: 20px; width: 100px; height: 150px; border: 2px solid var(--neon); border-radius: 8px; z-index: 5600; object-fit: cover; background: #111; }
        .end-call { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); width: 70px; height: 70px; background: var(--danger); border-radius: 50%; border: none; color: #fff; font-size: 25px; box-shadow: 0 0 20px var(--danger); cursor: pointer; }

        @keyframes pulse { from { transform: scale(0.95); } to { transform: scale(1.05); } }
    </style>
</head>
<body>

    <canvas id="matrix-bg"></canvas>

    <div id="intro-screen">
        <h1 class="intro-title">PHANTOM V43</h1>
        <p style="color:var(--blue); letter-spacing: 5px;">ISMAIL BOSS ELITE</p>
        <div style="color:var(--gold); border:1px solid; padding:5px 15px; margin-top:20px; font-size: 12px;">END-TO-END ENCRYPTION</div>
    </div>

    <div id="login-screen">
        <button class="role-btn" onclick="boot('BOSS')" style="color:var(--blue); border-color:var(--blue)">BOSS (HOST)</button>
        <button class="role-btn" onclick="boot('GUEST')">QONAQ (JOIN)</button>
    </div>

    <div id="app-screen">
        <div class="top-bar">
            <div><b style="color:var(--neon)">V43 BEAST</b><br><small id="status" style="font-size: 9px; color: #888;">OFFLINE</small></div>
            <div style="display:flex; gap:20px;">
                <i class="fas fa-video fa-lg" style="color:var(--blue)" onclick="prep('video')"></i>
                <i class="fas fa-phone-alt fa-lg" style="color:var(--neon)" onclick="prep('audio')"></i>
            </div>
        </div>
        
        <div class="feed" id="chat-feed">
            <div class="secure-notice">
                <i class="fas fa-lock"></i> B√ºt√ºn yazƒ±≈ümalarƒ±nƒ±z ƒ∞smail t…ôr…ôfind…ôn qorunur. Gizliliyiniz √∂n…ômlidir.
            </div>
        </div>

        <div class="bot-bar">
            <div class="emoji-panel">
                <span class="emoji-btn" onclick="sendEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                <span class="emoji-btn" onclick="sendEmoji('üî•')">üî•</span>
                <span class="emoji-btn" onclick="sendEmoji('üëç')">üëç</span>
            </div>
            <input type="text" class="msg-box" id="msg-in" placeholder="Mesaj yazƒ±n...">
            <i class="fas fa-paper-plane fa-lg" style="color:var(--blue); cursor: pointer;" onclick="sendTxt()"></i>
        </div>
    </div>

    <div id="vid-layer">
        <video id="remote-v" autoplay playsinline></video>
        <video id="local-v" autoplay muted playsinline></video>
        <button class="end-call" onclick="end()"><i class="fas fa-phone-slash"></i></button>
    </div>

<script>
const KEY = "V43_ISMAIL_BOSS_SECURE";
const BOSS_ID = "ISMAIL-V43-MASTER-77"; // Daha g√ºcl√º ID
let peer, conn, myStream, curCall, cType;

const sndEmoji = new Audio("https://cdn.freesound.org/previews/124/124902_2257257-lq.mp3");
const sndMsg = new Audio("https://cdn.freesound.org/previews/554/554220_11861213-lq.mp3");

window.onload = () => {
    drawMatrix();
    setTimeout(() => {
        document.getElementById('intro-screen').style.display = 'none';
        document.getElementById('login-screen').style.display = 'flex';
    }, 4000);
};

function boot(role) {
    document.getElementById('login-screen').style.display = 'none';
    const myId = (role === 'BOSS') ? BOSS_ID : "GUEST-" + Math.floor(Math.random()*99999);
    
    peer = new Peer(myId, {
        config: {'iceServers': [{urls:'stun:stun.l.google.com:19302'}, {urls:'stun:stun1.l.google.com:19302'}]},
        debug: 1
    });

    peer.on('open', (id) => {
        document.getElementById('app-screen').style.display = 'flex';
        document.getElementById('status').innerText = "Sƒ∞STEM AKTƒ∞VDƒ∞R: " + id;
        if(role === 'GUEST') tryConnect();
    });

    peer.on('connection', (c) => {
        conn = c;
        setup();
    });

    peer.on('call', call => {
        if(confirm("ƒ∞smail Boss Sistemind…ôn g…ôl…ôn z…ôngi q…ôbul edirsiz?")) {
            navigator.mediaDevices.getUserMedia({video: true, audio: true}).then(s => {
                myStream = s;
                document.getElementById('vid-layer').style.display = 'block';
                document.getElementById('local-v').srcObject = s;
                call.answer(s);
                call.on('stream', rs => {
                    const rv = document.getElementById('remote-v');
                    rv.srcObject = rs;
                    rv.play();
                });
                curCall = call;
            });
        }
    });

    peer.on('error', (err) => {
        console.error(err);
        document.getElementById('status').innerText = "X∆èTA BA≈û VERDƒ∞";
    });
}

function tryConnect() {
    const c = peer.connect(BOSS_ID, {reliable: true});
    c.on('open', () => { 
        conn = c; 
        setup(); 
        document.getElementById('status').innerText = "BOSS-A QO≈ûULDU";
    });
    setTimeout(() => { if(!conn) tryConnect(); }, 3000);
}

function setup() {
    conn.on('data', (raw) => {
        try {
            const bytes = CryptoJS.AES.decrypt(raw, KEY);
            const d = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));
            if(d.t === 'txt') { addMsg(d.c, 'them'); sndMsg.play(); }
            if(d.t === 'emo') { triggerEmoji(d.c); }
            if(d.t === 'end') { end(true); }
        } catch(e) { console.log("Decrypt error"); }
    });
    conn.on('close', () => { document.getElementById('status').innerText = "BAƒûLANTI K∆èSƒ∞LDƒ∞"; });
}

function sendTxt() {
    const i = document.getElementById('msg-in');
    if(!i.value || !conn) return;
    const enc = CryptoJS.AES.encrypt(JSON.stringify({t:'txt', c:i.value}), KEY).toString();
    conn.send(enc);
    addMsg(i.value, 'me');
    i.value = "";
}

function sendEmoji(emo) {
    if(!conn) return;
    const enc = CryptoJS.AES.encrypt(JSON.stringify({t:'emo', c:emo}), KEY).toString();
    conn.send(enc);
    triggerEmoji(emo);
}

function triggerEmoji(emo) {
    sndEmoji.play();
    confetti({
        particleCount: 150,
        spread: 80,
        origin: { y: 0.7 },
        colors: emo === '‚ù§Ô∏è' ? ['#ff0000'] : (emo === 'üî•' ? ['#ff6600', '#ffcc00'] : ['#00ff41'])
    });
}

function addMsg(t, w) {
    const d = document.createElement('div');
    d.className = `bubble ${w}`;
    d.innerText = t;
    const f = document.getElementById('chat-feed');
    f.appendChild(d);
    f.scrollTop = f.scrollHeight;
}

async function prep(type) {
    if(!conn) return alert("H…ôl…ô qo≈üulmayƒ±b!");
    cType = type;
    document.getElementById('vid-layer').style.display = 'block';
    try {
        const stream = await navigator.mediaDevices.getUserMedia({video: type==='video', audio:true});
        myStream = stream;
        document.getElementById('local-v').srcObject = stream;
        curCall = peer.call(conn.peer, stream);
        curCall.on('stream', rs => {
            const rv = document.getElementById('remote-v');
            rv.srcObject = rs;
            rv.play();
        });
    } catch(e) { 
        alert("Kamera/Mikrofon tapƒ±lmadƒ±.");
        document.getElementById('vid-layer').style.display = 'none';
    }
}

function end(remote = false) {
    if(!remote && conn) {
        const enc = CryptoJS.AES.encrypt(JSON.stringify({t:'end'}), KEY).toString();
        conn.send(enc);
    }
    if(myStream) myStream.getTracks().forEach(t => t.stop());
    if(curCall) curCall.close();
    document.getElementById('vid-layer').style.display = 'none';
}

function drawMatrix() {
    const c = document.getElementById('matrix-bg');
    const x = c.getContext('2d');
    c.width = window.innerWidth; c.height = window.innerHeight;
    const drops = Array(Math.floor(c.width/20)).fill(1);
    function anim() {
        x.fillStyle = "rgba(0,0,0,0.05)"; x.fillRect(0,0,c.width,c.height);
        x.fillStyle = "#0f0";
        drops.forEach((y, i) => {
            x.fillText(Math.random()>0.5?"1":"0", i*20, y*20);
            if(y*20 > c.height && Math.random()>0.975) drops[i]=0;
            drops[i]++;
        });
        requestAnimationFrame(anim);
    }
    anim();
}
</script>
</body>
</html>







