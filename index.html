<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>OMEGA V26 | GHOST PROTOCOL</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        :root { --neon: #00f2ff; --gold: #d4af37; --danger: #ff003c; --matrix: #00ff41; }
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background: #000; color: #fff; height: 100vh; overflow: hidden; font-family: 'Orbitron', sans-serif; }

        /* CANLI MATRIX FON */
        canvas { position: fixed; inset: 0; z-index: -1; opacity: 0.3; }

        /* INTRO REKLAM (AZ/RU) */
        #ad-layer { position: fixed; inset: 0; background: #000; z-index: 500000; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .glitch-text { font-size: 24px; font-weight: 900; color: var(--neon); text-shadow: 2px 2px var(--danger); animation: glitch 1s infinite; }
        .loader-bar { width: 200px; height: 2px; background: #111; margin-top: 20px; position: relative; overflow: hidden; }
        .loader-fill { width: 0%; height: 100%; background: var(--neon); animation: load 8s forwards; }

        /* RADAR SCANNER */
        #search-screen { position: fixed; inset: 0; background: #000; z-index: 100000; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .radar-circle { width: 250px; height: 250px; border: 2px solid var(--matrix); border-radius: 50%; position: relative; box-shadow: 0 0 20px var(--matrix); }
        .radar-sweep { position: absolute; width: 50%; height: 50%; top: 0; left: 50%; background: linear-gradient(45deg, rgba(0,255,65,0.4), transparent); transform-origin: bottom left; animation: sweep 2s infinite linear; border-left: 2px solid var(--matrix); }

        /* APP INTERFACE */
        #app-core { display: none; height: 100vh; flex-direction: column; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); }
        .header { padding: 15px 25px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; background: #050505; }
        .feed { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; }
        .bubble { max-width: 85%; padding: 12px 18px; border-radius: 20px; font-family: 'Share Tech Mono'; line-height: 1.5; font-size: 15px; position: relative; }
        .me { align-self: flex-end; background: #004d4d; color: #fff; border-bottom-right-radius: 2px; box-shadow: -5px 5px 15px rgba(0,0,0,0.3); }
        .them { align-self: flex-start; background: #1a1a1a; color: #ccc; border-bottom-left-radius: 2px; border: 1px solid #333; }

        /* CALL UI */
        #call-ui { position: fixed; inset: 0; background: #000; z-index: 2000000; display: none; }
        .video-full { width: 100%; height: 100%; object-fit: cover; }
        .video-small { position: absolute; top: 30px; right: 20px; width: 110px; height: 160px; border-radius: 15px; border: 2px solid var(--neon); z-index: 10; object-fit: cover; }
        .call-status { position: absolute; top: 100px; width: 100%; text-align: center; font-size: 18px; color: var(--neon); text-shadow: 0 0 10px #000; }

        /* INPUT AREA */
        .input-box { padding: 15px; background: #050505; display: flex; align-items: center; gap: 12px; border-top: 1px solid #1a1a1a; }
        .msg-input { flex: 1; background: #111; border: 1px solid #222; color: #fff; padding: 12px 20px; border-radius: 25px; font-family: 'Share Tech Mono'; }

        @keyframes glitch { 0% { transform: skew(2deg) } 50% { transform: skew(-2deg) } 100% { transform: skew(2deg) } }
        @keyframes load { to { width: 100% } }
        @keyframes sweep { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
    </style>
</head>
<body>

<canvas id="m-bg"></canvas>

<div id="ad-layer">
    <div class="glitch-text" id="ad-txt">ISMAIL BOSS SYSTEM...</div>
    <div class="loader-bar"><div class="loader-fill"></div></div>
    <p style="margin-top:20px; font-size:10px; color:#444;" id="ad-sub">AZERBAIJAN CYBER DEFENSE FORCE</p>
    <button id="skip-btn" style="display:none; margin-top:30px; padding:12px 40px; border:1px solid var(--neon); background:none; color:var(--neon); cursor:pointer;" onclick="showGate()">ENTER SYSTEM</button>
</div>

<div id="gate-screen" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.95); z-index:100000; align-items:center; justify-content:center; flex-direction:column;">
    <h1 style="color:var(--gold); margin-bottom:40px; letter-spacing:10px;">GHOST V26</h1>
    <button onclick="init('BOSS')" style="width:280px; padding:20px; background:var(--neon); color:#000; font-weight:900; border:none; margin:10px; cursor:pointer;">I AM THE BOSS</button>
    <button onclick="init('GUEST')" style="width:280px; padding:20px; background:#111; color:#fff; border:1px solid #333; margin:10px; cursor:pointer;">GUEST ACCESS</button>
</div>

<div id="search-screen">
    <div class="radar-circle"><div class="radar-sweep"></div></div>
    <h2 id="status-msg" style="margin-top:40px; color:var(--matrix); letter-spacing:3px;">SCANNING NODES...</h2>
</div>

<div id="app-core">
    <div class="header">
        <b style="color:var(--neon)">GHOST PROTOCOL</b>
        <div style="display:flex; gap:20px;">
            <i class="fas fa-video" style="color:var(--neon); cursor:pointer;" onclick="startCall(true)"></i>
            <i class="fas fa-phone-alt" style="cursor:pointer;" onclick="startCall(false)"></i>
        </div>
    </div>
    <div class="feed" id="feed"></div>
    <div class="input-box">
        <i class="fas fa-microphone" id="mic-icon" style="color:var(--neon); font-size:22px;" onmousedown="recS()" onmouseup="recE()" ontouchstart="recS()" ontouchend="recE()"></i>
        <input type="text" id="minput" class="msg-input" placeholder="Dark message...">
        <i class="fas fa-paper-plane" style="color:var(--neon); font-size:22px;" onclick="sendText()"></i>
    </div>
</div>

<div id="call-ui">
    <video id="v-remote" class="video-full" autoplay playsinline></video>
    <video id="v-local" class="video-small" autoplay muted playsinline></video>
    <div class="call-status" id="c-status">CONNECTING...</div>
    <div style="position:absolute; bottom:60px; width:100%; display:flex; justify-content:center; gap:40px;">
        <button onclick="endCall()" style="width:70px; height:70px; border-radius:50%; background:var(--danger); border:none; color:#fff;"><i class="fas fa-phone-slash fa-2x"></i></button>
        <button id="ans-btn" onclick="answerCall()" style="display:none; width:70px; height:70px; border-radius:50%; background:var(--matrix); border:none; color:#fff;"><i class="fas fa-phone fa-2x"></i></button>
    </div>
</div>

<script>
let peer, conn, myS, recorder, chunks = [], currentC, role;
const MASTER_ID = "BOSS-ISMAIL-GHOST-ULTRA";
const KEY = "V26_GHOST_SECRET_99";

// AUDIO ASSETS (DUUD SESLERİ)
const ringback = new Audio("https://www.soundjay.com/phone/phone-calling-1.mp3"); // Dud-dud
const incoming = new Audio("https://www.soundjay.com/phone/phone-ring-01.mp3"); // Zəng gəlir
ringback.loop = true; incoming.loop = true;

// MATRIX FON
const canvas = document.getElementById('m-bg'); const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
const columns = canvas.width/20; const drops = Array(Math.floor(columns)).fill(1);
function matrix() {
    ctx.fillStyle = "rgba(0,0,0,0.05)"; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle = "#00f2ff"; ctx.font = "15px monospace";
    drops.forEach((y, i) => {
        const text = Math.random() > 0.5 ? "0" : "1";
        ctx.fillText(text, i*20, y*20);
        if(y*20 > canvas.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
    });
}
setInterval(matrix, 50);

// REKLAM MOTORU
const phrases = ["SİSTEM BAŞLADILIR...", "ЗАПУСК СИСТЕМЫ...", "GÜC: İSMAİL BOSS", "СИЛА: ИСМАИЛ БОСС", "ŞİFRƏLƏMƏ AKTİVDİR...", "ШИФРОВАНИЕ АКТИВНО..."];
let pi = 0;
setInterval(() => {
    document.getElementById('ad-txt').innerText = phrases[pi % phrases.length];
    pi++; if(pi > 5) document.getElementById('skip-btn').style.display = 'block';
}, 1500);

function showGate() { document.getElementById('ad-layer').style.display='none'; document.getElementById('gate-screen').style.display='flex'; }

// CONNECT ENGINE
function init(r) {
    role = r;
    document.getElementById('gate-screen').style.display='none';
    document.getElementById('search-screen').style.display='flex';
    
    const pid = (role==='BOSS') ? MASTER_ID : "G-"+Math.floor(Math.random()*9999);
    peer = new Peer(pid, { config: {'iceServers': [{ urls: 'stun:stun.l.google.com:19302' }]} });

    peer.on('open', () => {
        if(role==='BOSS') {
            document.getElementById('status-msg').innerText = "WAITING FOR GUEST...";
        } else {
            document.getElementById('status-msg').innerText = "SCANNING FOR BOSS...";
            const retry = setInterval(() => {
                let c = peer.connect(MASTER_ID);
                c.on('open', () => { conn = c; launch(); clearInterval(retry); });
            }, 3000);
        }
    });

    peer.on('connection', c => { conn = c; launch(); });
    peer.on('call', c => { 
        currentC = c; 
        incoming.play();
        document.getElementById('call-ui').style.display='block'; 
        document.getElementById('ans-btn').style.display='flex';
        document.getElementById('c-status').innerText = "INCOMING CALL...";
    });
}

function launch() {
    document.getElementById('search-screen').style.display='none';
    document.getElementById('app-core').style.display='flex';
    conn.on('data', d => {
        const dec = CryptoJS.AES.decrypt(d, KEY).toString(CryptoJS.enc.Utf8);
        display(JSON.parse(dec), 'them');
    });
}

function sendText() {
    const v = document.getElementById('minput').value; if(!v) return;
    const o = { t:'txt', b:v };
    conn.send(CryptoJS.AES.encrypt(JSON.stringify(o), KEY).toString());
    display(o, 'me');
    document.getElementById('minput').value = "";
}

function display(o, s) {
    const f = document.getElementById('feed');
    const d = document.createElement('div');
    d.className = `bubble ${s}`;
    if(o.t === 'txt') d.innerText = o.b;
    else {
        d.innerHTML = `<i class="fas fa-play"></i> SƏSLİ MESAJ`;
        d.onclick = () => new Audio(o.b).play();
    }
    f.appendChild(d); f.scrollTop = f.scrollHeight;
}

// HD CALL SYSTEM (WITH SOUNDS)
async function startCall(v) {
    document.getElementById('call-ui').style.display='block';
    document.getElementById('c-status').innerText = "CALLING...";
    ringback.play(); // Dud-dud başlasın
    
    myS = await navigator.mediaDevices.getUserMedia({video:v, audio:true});
    document.getElementById('v-local').srcObject = myS;
    currentC = peer.call(conn.peer, myS);
    currentC.on('stream', s => {
        ringback.pause(); 
        document.getElementById('c-status').innerText = "SECURE LINE";
        document.getElementById('v-remote').srcObject = s;
    });
}

async function answerCall() {
    incoming.pause();
    document.getElementById('ans-btn').style.display='none';
    myS = await navigator.mediaDevices.getUserMedia({video:true, audio:true});
    document.getElementById('v-local').srcObject = myS;
    currentC.answer(myS);
    currentC.on('stream', s => {
        document.getElementById('c-status').innerText = "SECURE LINE";
        document.getElementById('v-remote').srcObject = s;
    });
}

function endCall() {
    ringback.pause(); incoming.pause();
    if(currentC) currentC.close();
    if(myS) myS.getTracks().forEach(t => t.stop());
    document.getElementById('call-ui').style.display='none';
}

// VOICE MESSAGE (TELEGRAM STYLE)
async function recS() {
    chunks = [];
    const s = await navigator.mediaDevices.getUserMedia({audio:true});
    recorder = new MediaRecorder(s);
    recorder.ondataavailable = e => chunks.push(e.data);
    recorder.onstop = () => {
        const r = new FileReader();
        r.onload = () => {
            const o = { t:'aud', b:r.result };
            conn.send(CryptoJS.AES.encrypt(JSON.stringify(o), KEY).toString());
            display(o, 'me');
        };
        r.readAsDataURL(new Blob(chunks));
    };
    recorder.start();
    document.getElementById('mic-icon').style.color = 'var(--danger)';
}
function recE() { if(recorder) { recorder.stop(); document.getElementById('mic-icon').style.color = 'var(--neon)'; } }
</script>
</body>
</html>



