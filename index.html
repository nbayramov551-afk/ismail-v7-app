<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PHANTOM V48 | ISMAIL BOSS</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        :root { --neon: #00ff41; --danger: #ff003c; --blue: #00f2ff; --bg: #000; --gold: #ffd700; }
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; outline: none; }
        body { background: var(--bg); color: #fff; height: 100vh; overflow: hidden; font-family: 'Orbitron', sans-serif; }

        #matrix-bg { position: fixed; inset: 0; z-index: -1; opacity: 0.12; }

        /* REKLAM ANƒ∞MASƒ∞YALARI */
        .ad-layer { position: fixed; inset: 0; z-index: 9000; background: #000; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .ad-content { font-size: 2.5rem; color: var(--neon); text-shadow: 0 0 20px var(--neon); text-align: center; font-weight: 900; transform: translateX(-150%); transition: transform 0.8s ease-in-out; }
        .ad-content.show { transform: translateX(0); }
        .ad-content.slide-out { transform: translateX(150%); }

        /* LOGIN & SCAN */
        #login-screen { position: fixed; inset: 0; z-index: 5000; background: #000; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .role-btn { width: 280px; padding: 25px; margin: 15px; border: 3px solid var(--neon); background: transparent; color: var(--neon); font-size: 1.3rem; font-weight: 900; cursor: pointer; position: relative; overflow: hidden; transition: 0.3s; }
        .role-btn:hover { background: var(--neon); color: #000; box-shadow: 0 0 40px var(--neon); }

        #scan-screen { position: fixed; inset: 0; z-index: 4000; background: #000; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .radar { width: 280px; height: 280px; border: 4px solid var(--neon); border-radius: 50%; position: relative; box-shadow: 0 0 30px rgba(0,255,65,0.3); }
        .radar::after { content: ''; position: absolute; inset: 0; border-radius: 50%; background: conic-gradient(transparent, var(--neon)); animation: rotate 1.2s linear infinite; opacity: 0.6; }

        /* APP MAIN */
        #app-screen { position: fixed; inset: 0; z-index: 100; display: none; flex-direction: column; background: #000; }
        .top-bar { padding: 20px; border-bottom: 2px solid var(--neon); display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.9); }
        .feed { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .bubble { padding: 15px; border-radius: 10px; max-width: 80%; font-family: 'Share Tech Mono'; font-size: 14px; border: 1px solid rgba(0,255,65,0.1); word-break: break-all; }
        .me { align-self: flex-end; background: #004d40; border-right: 4px solid var(--blue); }
        .them { align-self: flex-start; background: #1a1a1a; border-left: 4px solid var(--neon); }

        /* MEDIA UI */
        #media-layer { position: fixed; inset: 0; z-index: 6000; background: #000; display: none; }
        #remote-v { width: 100%; height: 100%; object-fit: cover; }
        #local-v { position: absolute; top: 20px; right: 20px; width: 110px; height: 160px; border: 2px solid var(--blue); border-radius: 10px; z-index: 6001; }
        .end-call { position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); width: 80px; height: 80px; background: var(--danger); border-radius: 50%; border: none; color: #fff; font-size: 30px; cursor: pointer; box-shadow: 0 0 20px var(--danger); }

        .boss-footer { padding: 10px; text-align: center; background: #000; border-top: 1px solid #222; font-family: 'Share Tech Mono'; color: var(--gold); letter-spacing: 5px; font-weight: 900; }

        @keyframes rotate { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <canvas id="matrix-bg"></canvas>

    <div id="ad1" class="ad-layer">
        <div class="ad-content" id="ad1-text">
            <i class="fas fa-shield-alt fa-2x"></i><br>
            G√úV∆èNLƒ∞ BAƒûLANTI<br>
            <span style="font-size: 1rem; color: var(--blue);">PHANTOM V48 ULTRA ≈ûƒ∞FR∆èL∆èM∆è</span>
        </div>
    </div>

    <div id="ad2" class="ad-layer" style="display:none;">
        <div class="ad-content" id="ad2-text">
            <i class="fas fa-comment-dots fa-2x"></i><br>
            XO≈û √úNSƒ∞YY∆èTL∆èR<br>
            <span style="font-size: 1rem; color: var(--gold);">ISMAIL BOSS Sƒ∞STEMƒ∞</span>
        </div>
    </div>

    <div id="login-screen">
        <h1 style="color:var(--neon); margin-bottom:30px; letter-spacing:10px;">V48 STEALTH</h1>
        <button class="role-btn" onclick="initSystem('BOSS')">BOSS MODE</button>
        <button class="role-btn" onclick="initSystem('GUEST')" style="border-color:var(--blue); color:var(--blue)">GUEST MODE</button>
    </div>

    <div id="scan-screen">
        <div class="radar"></div>
        <div style="margin-top:30px; color:var(--neon); font-family:'Share Tech Mono';" id="scan-status">KANAL ANALƒ∞Z EDƒ∞Lƒ∞R...</div>
    </div>

    <div id="app-screen">
        <div class="top-bar">
            <div><b style="color:var(--neon)">V48 TERMINAL</b><br><small id="conn-stat" style="color:var(--blue); font-size:10px;">SECURE CHANNEL</small></div>
            <div style="display:flex; gap:25px;">
                <i class="fas fa-video fa-xl" style="color:var(--blue)" onclick="call('video')"></i>
                <i class="fas fa-phone-alt fa-xl" style="color:var(--neon)" onclick="call('audio')"></i>
            </div>
        </div>
        <div class="feed" id="chat-feed"></div>
        <div style="padding:15px; background:rgba(0,0,0,0.9); border-top:1px solid var(--neon);">
            <div style="display:flex; gap:15px; margin-bottom:10px; justify-content:center; font-size:25px;">
                <span onclick="sendEmo('‚ù§Ô∏è')">‚ù§Ô∏è</span><span onclick="sendEmo('üî•')">üî•</span><span onclick="sendEmo('‚ö°')">‚ö°</span><span onclick="sendEmo('üíÄ')">üíÄ</span>
            </div>
            <div style="display:flex; gap:10px;">
                <input type="text" id="msg-in" style="flex:1; background:#111; border:1px solid #333; color:#fff; padding:15px; border-radius:5px;" placeholder="Base64 Kripto...">
                <button onclick="sendMsg()" style="background:transparent; border:none; color:var(--blue); font-size:25px;"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <div class="boss-footer">ISMAIL BOSS SYSTEM</div>
    </div>

    <div id="media-layer">
        <video id="remote-v" autoplay playsinline></video>
        <video id="local-v" autoplay muted playsinline></video>
        <button class="end-call" onclick="terminate()"><i class="fas fa-phone-slash"></i></button>
    </div>

<script>
const S_KEY = "BOSS-V48-AES-ULTRA-BASE64-KEY";
const BOSS_ID = "ISMAIL-V48-PHANTOM-CORE";
let peer, conn, myStream, currentCall;

// Ultra ≈ûifr…ôl…ôm…ô
const pack = (v) => btoa(CryptoJS.AES.encrypt(JSON.stringify(v), S_KEY).toString());
const unpack = (v) => JSON.parse(CryptoJS.AES.decrypt(atob(v), S_KEY).toString(CryptoJS.enc.Utf8));

// Reklam Ardƒ±cƒ±llƒ±ƒüƒ±
window.onload = () => {
    initMatrix();
    const ad1 = document.getElementById('ad1');
    const ad1Text = document.getElementById('ad1-text');
    const ad2 = document.getElementById('ad2');
    const ad2Text = document.getElementById('ad2-text');

    setTimeout(() => { ad1Text.classList.add('show'); }, 500);
    setTimeout(() => { 
        ad1Text.classList.add('slide-out');
        setTimeout(() => {
            ad1.style.display = 'none';
            ad2.style.display = 'flex';
            setTimeout(() => { ad2Text.classList.add('show'); }, 100);
        }, 800);
    }, 3000);

    setTimeout(() => {
        ad2Text.classList.add('slide-out');
        setTimeout(() => {
            ad2.style.display = 'none';
            document.getElementById('login-screen').style.display = 'flex';
        }, 800);
    }, 6500);
};

function initSystem(role) {
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('scan-screen').style.display = 'flex';
    
    const myId = (role === 'BOSS') ? BOSS_ID : "GUEST-" + Math.floor(Math.random()*99999);
    peer = new Peer(myId, {
        config: {'iceServers': [
            {urls: 'stun:stun.l.google.com:19302'},
            {urls: 'stun:stun1.l.google.com:19302'},
            {urls: 'stun:stun2.l.google.com:19302'}
        ]}
    });

    peer.on('open', () => {
        if(role === 'GUEST') connectLoop();
        document.getElementById('scan-status').innerText = role + " MODU AKTƒ∞VDƒ∞R...";
    });

    peer.on('connection', c => {
        conn = c;
        conn.on('data', d => handleData(unpack(d)));
        enterTerminal();
    });

    peer.on('call', call => {
        if(confirm("G…ôl…ôn Ultra ≈ûifr…ôli Z…ôngi Q…ôbul Edirsiniz?")) {
            const isVid = call.options.constraints.video !== false;
            navigator.mediaDevices.getUserMedia({video: isVid, audio: true}).then(s => {
                myStream = s;
                showMedia(isVid);
                call.answer(s);
                call.on('stream', rs => document.getElementById('remote-v').srcObject = rs);
                currentCall = call;
            });
        }
    });
}

function connectLoop() {
    const c = peer.connect(BOSS_ID, {reliable: true});
    c.on('open', () => {
        conn = c;
        conn.on('data', d => handleData(unpack(d)));
        enterTerminal();
    });
    setTimeout(() => { if(!conn) connectLoop(); }, 1500);
}

function enterTerminal() {
    document.getElementById('scan-status').innerText = "BAƒûLANTI 100% QURULDU!";
    setTimeout(() => {
        document.getElementById('scan-screen').style.display = 'none';
        document.getElementById('app-screen').style.display = 'flex';
        confetti({ particleCount: 200, spread: 80, origin: { y: 0.7 } });
    }, 1200);
}

function handleData(data) {
    if(data.t === 'msg') addBubble(data.v, 'them');
    if(data.t === 'emo') { trigger8D(data.v); addBubble(data.v, 'them'); }
    if(data.t === 'end') terminate(true);
}

function sendMsg() {
    const i = document.getElementById('msg-in');
    if(!i.value || !conn) return;
    conn.send(pack({t:'msg', v:i.value}));
    addBubble(i.value, 'me');
    i.value = "";
}

function sendEmo(e) {
    conn.send(pack({t:'emo', v:e}));
    trigger8D(e);
    addBubble(e, 'me');
}

function addBubble(v, w) {
    const b = document.createElement('div');
    b.className = `bubble ${w}`;
    b.innerText = v;
    const f = document.getElementById('chat-feed');
    f.appendChild(b);
    f.scrollTop = f.scrollHeight;
}

async function call(mode) {
    const isVid = mode === 'video';
    showMedia(isVid);
    const s = await navigator.mediaDevices.getUserMedia({
        video: isVid ? {facingMode:"user", width:1280} : false,
        audio: {echoCancellation: true}
    });
    myStream = s;
    document.getElementById('local-v').srcObject = isVid ? s : null;
    currentCall = peer.call(conn.peer, s);
    currentCall.on('stream', rs => document.getElementById('remote-v').srcObject = rs);
}

function showMedia(isVid) {
    document.getElementById('media-layer').style.display = 'block';
    document.getElementById('local-v').style.display = isVid ? 'block' : 'none';
}

function terminate(remote = false) {
    if(!remote && conn) conn.send(pack({t:'end'}));
    if(myStream) myStream.getTracks().forEach(t => t.stop());
    document.getElementById('media-layer').style.display = 'none';
}

function trigger8D(emo) {
    confetti({ particleCount: 100, spread: 360, startVelocity: 30, shapes: [confetti.shapeFromText({text:emo})] });
}

function initMatrix() {
    const c = document.getElementById('matrix-bg');
    const x = c.getContext('2d');
    c.width = window.innerWidth; c.height = window.innerHeight;
    const drops = Array(Math.floor(c.width/20)).fill(1);
    function draw() {
        x.fillStyle = "rgba(0,0,0,0.05)"; x.fillRect(0,0,c.width,c.height);
        x.fillStyle = "#0f0";
        drops.forEach((y, i) => {
            x.fillText(Math.random() > 0.5 ? "1" : "0", i*20, y*20);
            if(y*20 > c.height && Math.random() > 0.98) drops[i] = 0;
            drops[i]++;
        });
        requestAnimationFrame(draw);
    }
    draw();
}
</script>
</body>
</html>

