<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>İSMAİL BOSS | OMEGA V22 ELITE</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Source+Code+Pro:wght@300;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --boss-neon: #00f2ff; --boss-gold: #ffcc00; --matrix-green: #00ff41; --bg: #000; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: #fff; height: 100vh; overflow: hidden; font-family: 'Orbitron', sans-serif; }

        /* REKLAM QATI - PREMİUM */
        #ad-layer { position: fixed; inset: 0; background: #000; z-index: 500000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .ad-container { width: 90%; text-align: center; }
        
        .matrix-text { font-family: 'Source Code Pro', monospace; color: var(--matrix-green); font-size: 14px; text-shadow: 0 0 5px var(--matrix-green); line-height: 1.5; overflow: hidden; white-space: nowrap; border-right: 2px solid #fff; width: 0; margin: 0 auto; }
        
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink { 50% { border-color: transparent } }

        .skip-btn { position: absolute; bottom: 50px; padding: 12px 35px; border: 1px solid var(--boss-neon); color: var(--boss-neon); background: rgba(0,0,0,0.8); cursor: pointer; font-family: 'Orbitron'; letter-spacing: 2px; display: none; }

        /* GİRİŞ EKRANI */
        #gate-screen { position: fixed; inset: 0; background: radial-gradient(circle at center, #0a0a25 0%, #000 100%); z-index: 100000; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .btn-boss { width: 280px; padding: 20px; margin: 15px; border: none; background: linear-gradient(45deg, #004e52, var(--boss-neon)); color: #000; font-weight: 900; cursor: pointer; clip-path: polygon(15% 0, 100% 0, 85% 100%, 0 100%); transition: 0.3s; font-family: 'Orbitron'; }
        .btn-boss:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--boss-neon); }

        /* AXTARIŞ */
        #search-layer { position: fixed; inset: 0; background: #000; z-index: 200000; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .glow-circle { width: 120px; height: 120px; border: 2px solid var(--boss-neon); border-radius: 50%; box-shadow: 0 0 30px var(--boss-neon); animation: pulse 1.5s infinite; }

        /* ƏSAS INTERFEYS (LUXURY) */
        #app-core { display: none; height: 100vh; flex-direction: column; background: #050505; }
        .header { padding: 20px; background: rgba(15,15,15,0.9); border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; }
        .chat-area { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        
        .bubble { max-width: 75%; padding: 15px; border-radius: 18px; font-family: sans-serif; line-height: 1.4; position: relative; }
        .m { align-self: flex-end; background: #002d2f; border: 1px solid var(--boss-neon); border-bottom-right-radius: 2px; }
        .t { align-self: flex-start; background: #1a1a1a; border: 1px solid #333; border-bottom-left-radius: 2px; }

        .media-btn { color: var(--boss-neon); font-size: 22px; cursor: pointer; transition: 0.2s; }
        .media-btn:hover { color: #fff; transform: scale(1.1); }

        /* VİDEO CALL LAYER */
        #call-ui { position: fixed; inset: 0; background: #000; z-index: 1000000; display: none; }
        .remote-v { width: 100%; height: 100%; object-fit: cover; }
        .local-v { position: absolute; top: 20px; right: 20px; width: 110px; height: 160px; border-radius: 10px; border: 2px solid var(--boss-neon); object-fit: cover; }

        @keyframes pulse { 0% { opacity: 0.5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.5; transform: scale(1); } }
    </style>
</head>
<body>

    <div id="ad-layer">
        <div id="ad-content" class="ad-container">
            <h1 id="ad-title" style="color:var(--boss-neon); font-size: 28px; margin-bottom: 20px;">INITIALIZING OMEGA...</h1>
            <div id="matrix-box" style="height: 100px;">
                <p class="matrix-text" id="m1">System.Connect("Ismail_Boss_Network");</p>
                <p class="matrix-text" id="m2" style="animation-delay: 1s;">Bypass.Yandex_Firewall(ENABLED);</p>
                <p class="matrix-text" id="m3" style="animation-delay: 2s;">Encrypt.AES_256(BIT_LEVEL_MAX);</p>
            </div>
        </div>
        <div id="ad-timer" style="margin-top: 30px; color: #555;">SECURITY CHECK: 10s</div>
        <button id="skip-btn" class="skip-btn" onclick="goToGate()">ACCESS CORE</button>
    </div>

    <div id="gate-screen">
        <div style="text-align: center;">
            <i class="fas fa-shield-alt" style="font-size: 50px; color: var(--boss-neon); margin-bottom: 20px;"></i>
            <h1 style="font-size: 24px; letter-spacing: 5px; margin-bottom: 40px;">WELCOME, BOSS</h1>
            <button class="btn-boss" onclick="initSystem('BOSS')"><i class="fas fa-crown"></i> ESTABLISH AS BOSS</button>
            <button class="btn-boss" style="background: #111; color: #888; border: 1px solid #333;" onclick="initSystem('DOST')"><i class="fas fa-link"></i> CONNECT AS GUEST</button>
        </div>
    </div>

    <div id="search-layer">
        <div class="glow-circle"></div>
        <h2 id="status-text" style="margin-top: 40px; letter-spacing: 3px; color: var(--boss-neon);">TUNNELING...</h2>
    </div>

    <div id="app-core">
        <div class="header">
            <b style="color: var(--boss-neon); font-size: 18px;">OMEGA ELITE LIVE</b>
            <div style="display: flex; gap: 25px;">
                <i class="fas fa-video media-btn" onclick="startCall(true)"></i>
                <i class="fas fa-phone-alt media-btn" onclick="startCall(false)"></i>
            </div>
        </div>
        <div class="chat-area" id="chat-feed"></div>
        <div style="padding: 20px; background: #0a0a0a; display: flex; align-items: center; gap: 15px; border-top: 1px solid #222;">
            <i class="fas fa-microphone media-btn" id="mic-btn" onmousedown="recStart()" onmouseup="recStop()"></i>
            <input type="text" id="msg-input" style="flex:1; background: #151515; border: 1px solid #333; color:#fff; padding: 15px; border-radius: 10px; outline: none;" placeholder="Secure message...">
            <i class="fas fa-paper-plane media-btn" onclick="sendMsg()"></i>
        </div>
    </div>

    <div id="call-ui">
        <video id="v-remote" class="remote-v" autoplay playsinline></video>
        <video id="v-local" class="local-v" autoplay muted playsinline></video>
        <div style="position: absolute; bottom: 50px; left: 0; right: 0; display: flex; justify-content: center; gap: 30px;">
            <button onclick="location.reload()" style="width: 70px; height: 70px; border-radius: 50%; background: #ff003c; border: none; color: #fff; font-size: 25px;"><i class="fas fa-phone-slash"></i></button>
            <button id="ans-btn" onclick="answerCall()" style="display:none; width: 70px; height: 70px; border-radius: 50%; background: var(--matrix-green); border: none; color: #000; font-size: 25px;"><i class="fas fa-phone"></i></button>
        </div>
    </div>

    <script>
        let timeLeft = 10;
        let peer, conn, myRole, myStream, recorder, chunks = [];
        const MASTER_ID = "ISMAIL-BOSS-OMEGA-ULTRA-STATION";
        const KEY = "ISMAIL_BOSS_V22_SECRET_KEY";

        // REKLAM MOTORU
        const adTimer = setInterval(() => {
            timeLeft--;
            document.getElementById('ad-timer').innerText = `SECURITY CHECK: ${timeLeft}s`;
            
            if(timeLeft == 7) {
                document.getElementById('ad-title').innerText = "ISMAIL BOSS CODING EMPIRE";
                document.getElementById('m1').innerText = "function IsmailBoss() {";
                document.getElementById('m2').innerText = "  status: 'LEGENDARY',";
                document.getElementById('m3').innerText = "  code: 'UNBREAKABLE' }";
                document.querySelectorAll('.matrix-text').forEach(t => {
                    t.style.animation = "typing 2s steps(40) forwards, blink .5s step-end infinite";
                });
            }
            
            if(timeLeft <= 5) document.getElementById('skip-btn').style.display = "block";
            if(timeLeft <= 0) goToGate();
        }, 1000);

        function goToGate() {
            clearInterval(adTimer);
            document.getElementById('ad-layer').style.display = 'none';
            document.getElementById('gate-screen').style.display = 'flex';
        }

        async function initSystem(role) {
            myRole = role;
            document.getElementById('gate-screen').style.display = 'none';
            document.getElementById('search-layer').style.display = 'flex';
            
            const peerId = (role === 'BOSS') ? MASTER_ID : "GUEST-" + Math.random().toString(36).substr(2, 6);
            peer = new Peer(peerId, {
                config: {'iceServers': [{ urls: 'stun:stun.l.google.com:19302' }, { urls: 'stun:stun1.l.google.com:19302' }]}
            });

            peer.on('open', () => {
                if(role === 'BOSS') {
                    document.getElementById('status-text').innerText = "WAITING FOR CONNECTION...";
                } else {
                    document.getElementById('status-text').innerText = "HACKING TUNNEL TO BOSS...";
                    autoRetry();
                }
            });

            peer.on('connection', c => {
                conn = c;
                launchApp();
            });

            peer.on('call', c => {
                currentCall = c;
                document.getElementById('call-ui').style.display = 'block';
                document.getElementById('ans-btn').style.display = 'block';
            });
        }

        function autoRetry() {
            const loop = setInterval(() => {
                let c = peer.connect(MASTER_ID);
                c.on('open', () => {
                    conn = c;
                    launchApp();
                    clearInterval(loop);
                });
            }, 3000);
        }

        function launchApp() {
            document.getElementById('search-layer').style.display = 'none';
            document.getElementById('app-core').style.display = 'flex';
            
            conn.on('data', data => {
                const dec = CryptoJS.AES.decrypt(data, KEY).toString(CryptoJS.enc.Utf8);
                const obj = JSON.parse(dec);
                display(obj, 't');
            });
        }

        function sendMsg() {
            const val = document.getElementById('msg-input').value; if(!val) return;
            const obj = { type: 'txt', body: val };
            const enc = CryptoJS.AES.encrypt(JSON.stringify(obj), KEY).toString();
            conn.send(enc);
            display(obj, 'm');
            document.getElementById('msg-input').value = "";
        }

        function display(obj, side) {
            const f = document.getElementById('chat-feed');
            const b = document.createElement('div');
            b.className = `bubble ${side}`;
            if(obj.type === 'txt') b.innerText = obj.body;
            else {
                b.innerHTML = `<i class="fas fa-play"></i> HD VOICE MESSAGE`;
                b.onclick = () => new Audio(obj.body).play();
            }
            f.appendChild(b);
            f.scrollTop = f.scrollHeight;
        }

        // HD MEDIA ENGINE
        async function startCall(v) {
            document.getElementById('call-ui').style.display = 'block';
            myStream = await navigator.mediaDevices.getUserMedia({
                video: v ? { width: 1280, height: 720 } : false,
                audio: true
            });
            document.getElementById('v-local').srcObject = myStream;
            const call = peer.call(conn.peer, myStream);
            call.on('stream', s => document.getElementById('v-remote').srcObject = s);
        }

        async function answerCall() {
            document.getElementById('ans-btn').style.display = 'none';
            myStream = await navigator.mediaDevices.getUserMedia({video: true, audio: true});
            document.getElementById('v-local').srcObject = myStream;
            currentCall.answer(myStream);
            currentCall.on('stream', s => document.getElementById('v-remote').srcObject = s);
        }

        function recStart() {
            navigator.mediaDevices.getUserMedia({audio: true}).then(s => {
                recorder = new MediaRecorder(s);
                recorder.ondataavailable = e => chunks.push(e.data);
                recorder.onstop = () => {
                    const r = new FileReader();
                    r.onload = () => {
                        const obj = { type: 'aud', body: r.result };
                        conn.send(CryptoJS.AES.encrypt(JSON.stringify(obj), KEY).toString());
                        display(obj, 'm');
                    };
                    r.readAsDataURL(new Blob(chunks)); chunks = [];
                };
                recorder.start();
                document.getElementById('mic-btn').style.color = 'red';
            });
        }
        function recStop() { if(recorder) { recorder.stop(); document.getElementById('mic-btn').style.color = 'var(--boss-neon)'; } }
    </script>
</body>
</html>


